/**
 * vue-pretty-scroll v1.0.0
 * release at 2020-7-18
 * by Knight Chen
 * github https://github.com/keuby/vue-pretty-scroll#readme
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@better-scroll/core")):"function"==typeof define&&define.amd?define(["@better-scroll/core"],e):(t=t||self).PrettyScroll=e(t.BScroll)}(this,function(n){"use strict";n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){return null!==t&&"object"===e(t)}function o(t,e){if(!u(e))return t;for(var n in e)t[n]=e[n];return t}var s=(t.prototype.unsubscribe=function(){this.root.removeEventListener(this.event,this.callback)},t);function t(t,e,n){this.root=t,this.event=e,this.callback=n}var l=(c.prototype.observe=function(t){var e=function(e,n){var r,o,i=this;return void 0===n&&(n=300),function(t){r=t,null!=o&&(clearTimeout(i.lastestTimer),o=null),o=setTimeout(function(){e(r)},n)}}(t,this.debounceTime);return this.root.addEventListener(this.event,e),new s(this.root,this.event,e)},c);function c(t){this.event="resize",this.debounceTime=300,this.root=t||window}var f=(a.setDefaultConfig=function(t){a.defaultConfig=o(a.defaultConfig,t)},a.prototype.start=function(t){var e;void 0!==t&&(this.selector=t),this.started&&this.stop(),this.container=this.getContainer(t),null!=this.container&&(e=r(r({},a.defaultConfig),this.config),this.scroll=new n(this.container,e),this.initObserver()),this.started=!0},a.prototype.update=function(){this.started&&(null==this.scroll&&this.start(),this.scroll&&this.scroll.refresh())},a.prototype.stop=function(){null!=this.scroll&&(this.scroll.destroy(),this.scroll=null),null!=this.subscription&&(this.subscription.unsubscribe(),this.subscription=null),this.container=null,this.started=!1},a.prototype.setConfig=function(t){this.config=o(this.config,t)},a.prototype.getContainer=function(t){return void 0===t&&(t=this.selector),null!=t?this.root.querySelector(t):this.root},a.prototype.initObserver=function(){var t=this;null!=this.subscription&&(this.subscription.unsubscribe(),this.subscription=null);var e=new l;this.subscription=e.observe(function(){t.update()})},a.defaultConfig={},a);function a(t,e){void 0===e&&(e={}),this.started=!1,this.config={},t instanceof HTMLElement?this.root=t:this.root=document.querySelector(t),this.config=r({},e)}var h={inserted:function(t,e){var n=e.value||{},r=n.selector,o=i(n,["selector"]);(t.__scroll=new f(t,o)).start(r)},update:function(t,e){var n,r,o;!function n(e,r){if(e===r)return!0;var t=u(e),o=u(r);if(!t||!o)return!t&&!o&&String(e)===String(r);try{var i=Array.isArray(e),s=Array.isArray(r);if(i&&s)return e.length===r.length&&e.every(function(t,e){return n(t,r[e])});if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(i||s)return!1;var l=Object.keys(e),c=Object.keys(r);return l.length===c.length&&l.every(function(t){return n(e[t],r[t])})}catch(t){return!1}}(e.value,e.oldValue)&&(r=(n=e.value||{}).selector,o=i(n,["selector"]),t.__scroll.setConfig(o),t.__scroll.start(r))},componentUpdated:function(t){t.__scroll&&t.__scroll.update()},unbind:function(t){var e=t.__scroll;e&&e.stop(),t.__scroll=null}};return{install:function(t,e){void 0===e&&(e={});var n=e.name,r=void 0===n?"pretty-scroll":n,o=i(e,["name"]);f.setDefaultConfig(o),t.directive(r,h)}}});
