/**
 * vue-pretty-scroll v1.0.0
 * release at 2020-7-18
 * by Knight Chen
 * github https://github.com/keuby/vue-pretty-scroll#readme
 */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@better-scroll/core"),require("@better-scroll/scroll-bar"),require("@better-scroll/mouse-wheel")):"function"==typeof define&&define.amd?define(["@better-scroll/core","@better-scroll/scroll-bar","@better-scroll/mouse-wheel"],e):(t=t||self).PrettyScroll=e(t.BScroll,t.ScrollBar,t.MouseWheel)}(this,function(r,t,e){"use strict";r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t,e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var o=function(){return(o=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function i(t,e){var r={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(r[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(r[o[n]]=t[o[n]]);return r}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){return null!==t&&"object"===n(t)}function s(t,e){if(!u(e))return t;for(var r in e)t[r]=e[r];return t}var l=(c.prototype.unsubscribe=function(){this.root.removeEventListener(this.event,this.callback)},c);function c(t,e,r){this.root=t,this.event=e,this.callback=r}var a=(f.prototype.observe=function(t){var e=function(e,r){var o,n,i=this;return void 0===r&&(r=300),function(t){o=t,null!=n&&(clearTimeout(i.lastestTimer),n=null),n=setTimeout(function(){e(o)},r)}}(t,this.debounceTime);return this.root.addEventListener(this.event,e),new l(this.root,this.event,e)},f);function f(t){this.event="resize",this.debounceTime=300,this.root=t||window}r.use(t),r.use(e);var h=(p.setDefaultConfig=function(t){p.defaultConfig=s(p.defaultConfig,t)},p.prototype.start=function(t){var e;void 0!==t&&(this.selector=t),this.started&&this.stop(),this.container=this.getContainer(t),null!=this.container&&(e=o(o({},p.defaultConfig),this.config),this.scroll=new r(this.container,e),this.initObserver()),this.started=!0},p.prototype.update=function(){this.started&&(null==this.scroll&&this.start(),this.scroll&&this.scroll.refresh())},p.prototype.stop=function(){null!=this.scroll&&(this.scroll.destroy(),this.scroll=null),null!=this.subscription&&(this.subscription.unsubscribe(),this.subscription=null),this.container=null,this.started=!1},p.prototype.setConfig=function(t){this.config=s(this.config,t)},p.prototype.getContainer=function(t){return void 0===t&&(t=this.selector),null!=t?this.root.querySelector(t):this.root},p.prototype.initObserver=function(){var t=this;null!=this.subscription&&(this.subscription.unsubscribe(),this.subscription=null);var e=new a;this.subscription=e.observe(function(){t.update()})},p.defaultConfig={},p);function p(t,e){void 0===e&&(e={}),this.started=!1,this.config={},t instanceof HTMLElement?this.root=t:this.root=document.querySelector(t),this.config=o({},e)}var y={inserted:function(t,e){var r=e.value||{},o=r.selector,n=i(r,["selector"]);(t.__scroll=new h(t,n)).start(o)},update:function(t,e){var r,o,n;!function r(e,o){if(e===o)return!0;var t=u(e),n=u(o);if(!t||!n)return!t&&!n&&String(e)===String(o);try{var i=Array.isArray(e),s=Array.isArray(o);if(i&&s)return e.length===o.length&&e.every(function(t,e){return r(t,o[e])});if(e instanceof Date&&o instanceof Date)return e.getTime()===o.getTime();if(i||s)return!1;var l=Object.keys(e),c=Object.keys(o);return l.length===c.length&&l.every(function(t){return r(e[t],o[t])})}catch(t){return!1}}(e.value,e.oldValue)&&(o=(r=e.value||{}).selector,n=i(r,["selector"]),t.__scroll.setConfig(n),t.__scroll.start(o))},componentUpdated:function(t){t.__scroll&&t.__scroll.update()},unbind:function(t){var e=t.__scroll;e&&e.stop(),t.__scroll=null}};return{install:function(t,e){void 0===e&&(e={});var r=e.name,o=void 0===r?"pretty-scroll":r,n=i(e,["name"]);h.setDefaultConfig(n),t.directive(o,y)}}});
